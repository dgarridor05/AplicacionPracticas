{% extends "base.html" %}
{% block title %}Perfil de {{ student.nickname|default:student.username }}{% endblock %}

{% block content %}
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm border-0" style="border-radius: 20px;">
        <div class="card-body p-5">
          <h2 class="card-title text-center mb-4 text-success fw-bold">
            Perfil de {{ student.nickname|default:student.username }}
          </h2>

          <div class="text-center mb-4">
            {% if student.profile_picture %}
              <img src="{{ student.profile_picture.url }}" alt="Foto de perfil" class="rounded-circle img-fluid border border-success p-1" style="max-width: 150px; width: 150px; height: 150px; object-fit: cover;">
            {% else %}
              <div class="bg-light rounded-circle d-inline-block d-flex align-items-center justify-content-center mx-auto" style="width: 150px; height: 150px; border: 2px dashed #198754;">
                <i class="fas fa-user fa-3x text-muted"></i>
              </div>
            {% endif %}
          </div>

          <ul class="list-group list-group-flush mb-4">
            <li class="list-group-item px-0"><strong><i class="fas fa-map-marker-alt text-success me-2"></i>Zona de residencia:</strong> {{ student.residence_area|default:"No especificado" }}</li>
            
            <li class="list-group-item px-0">
                <strong><i class="fas fa-music text-success me-2"></i>Canción favorita:</strong> {{ student.favorite_song|default:"No especificada" }}
                
                {% if student.spotify_embed_url %}
                <div class="mt-3">
                    <iframe style="border-radius:12px" 
                            src="{{ student.spotify_embed_url }}" 
                            width="100%" height="152" 
                            frameBorder="0" 
                            allowfullscreen="" 
                            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                            loading="lazy">
                    </iframe>
                </div>
                {% endif %}
            </li>

            <li class="list-group-item px-0"><strong><i class="fas fa-microphone text-success me-2"></i>Artista favorito:</strong> {{ student.favorite_artist|default:"No especificado" }}</li>
            <li class="list-group-item px-0"><strong><i class="fas fa-film text-success me-2"></i>Película favorita:</strong> {{ student.favorite_movie|default:"No especificada" }}</li>

            <li class="list-group-item px-0">
                <strong><i class="fas fa-globe-americas text-success me-2"></i>Lugar favorito:</strong> 
                {% if student.favorite_place %}
                  <a href="https://www.google.com/maps/search/?api=1&query={{ student.favorite_place|urlencode }}" 
                     target="_blank" 
                     class="text-decoration-none fw-bold text-primary">
                     {{ student.favorite_place }} <i class="fas fa-external-link-alt small ms-1"></i>
                  </a>
                {% else %}
                  No especificado
                {% endif %}
            </li>

            <li class="list-group-item px-0"><strong><i class="fas fa-lightbulb text-success me-2"></i>Motivación:</strong> {{ student.motivation|default:"No especificada" }}</li>
            
            <li class="list-group-item px-0"><strong><i class="fas fa-heart text-danger me-2"></i>Agradecimiento:</strong> {{ student.gratitude|default:"No compartido aún" }}</li>
            <li class="list-group-item px-0"><strong><i class="fas fa-star text-warning me-2"></i>Recuerdo más feliz:</strong> {{ student.happy_memory|default:"No compartido aún" }}</li>
          </ul>

          <div class="text-center mt-4">
            <a href="{% url 'classmates_list' %}" class="btn btn-outline-success px-4">
                <i class="fas fa-arrow-left me-2"></i>Volver a la lista
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}